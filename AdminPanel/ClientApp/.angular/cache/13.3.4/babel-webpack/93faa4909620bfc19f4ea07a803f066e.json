{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms'; // import { Injectable, Inject } from '@angular/core';\n// import { HttpClient } from '@angular/common/http';\n// import { BehaviorSubject, Observable, of, Subject } from 'rxjs';\n// import { Users } from '../model/users';\n\nlet LoginComponent = class LoginComponent {\n  constructor(router, route, loginService, locationService, authService, ls) {\n    this.router = router;\n    this.route = route;\n    this.loginService = loginService;\n    this.locationService = locationService;\n    this.authService = authService;\n    this.ls = ls;\n    this.returnUrl = '';\n    this.errorMessage = '';\n    this.showPass = false;\n    this.edited = false;\n    this.loginForm = new FormGroup({\n      email: new FormControl('', [Validators.required, Validators.email]),\n      password: new FormControl('', [Validators.required, Validators.minLength(6), Validators.maxLength(20)])\n    });\n  }\n\n  ngOnInit() {} // this.returnUrl = this.route.snapshot.queryParams['/admin/dashboard'] || '/';\n\n\n  showPassword() {\n    this.showPass = !this.showPass;\n  }\n\n  onSubmit() {\n    //this.router.navigate([\"/admin/dashboard\"]);\n    this.loginService.login(this.loginForm.controls.email.value, this.loginForm.controls.password.value).subscribe(data => {\n      if (data != null) {\n        this.ls.setSelectedUser(data);\n        this.loadLocations(data[\"id\"]); // this.router.navigate([\"/admin/dashboard\"]);\n      } else {// this.ts.showerror(\"Error\", \"Username or password is not correct.\");\n      }\n    }, error => {});\n    this.edited = true;\n  }\n\n  get f() {\n    return this.loginForm.controls;\n  }\n\n  get Email() {\n    return this.loginForm.get('email');\n  }\n\n  get Password() {\n    return this.loginForm.get('password');\n  }\n\n  loadLocations(id) {\n    this.locationService.getAllLocations(id).subscribe(res => {\n      if (res.length > 0) {\n        this.ls.setLocation(res);\n        this.ls.setSelectedLocation(res[0]);\n        this.router.navigate([\"/admin/dashboard\"]);\n      } else {\n        this.ls.setLocation(null);\n        this.ls.setSelectedLocation(null);\n      }\n    });\n  }\n\n};\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})], LoginComponent);\nexport { LoginComponent };","map":null,"metadata":{},"sourceType":"module"}